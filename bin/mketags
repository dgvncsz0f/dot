#!/bin/sh

suffixes="py hh h cc c java el l cl pl pm hs rb js"

bin_find=${bin_find:-/usr/bin/find}
bin_ctags=${bin_etags:-/usr/bin/ctags-exuberant}
bin_notifysend=${bin_notifysend:-/usr/bin/notify-send}

srcroot=$1

mketags_run()
{
  $bin_ctags -e -o "$srcroot/TAGS" -L-
}

mketags_notify()
{
  $bin_env DISPLAY=:0 $bin_notifysend --icon=dialog-information --urgency=low "$srcroot/TAGS updated"
}

mketags_gather()
{
  for suffix in $suffixes
  do
    find "$srcroot" -type f -name "*.${suffix}"
  done
}

{ mketags_gather | mketags_run; } && mketags_notify
